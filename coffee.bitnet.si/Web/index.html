<!DOCTYPE html>
<html>
<!-- Mirrored from coffee.bitnet.si/Web/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 18 Apr 2017 19:49:41 GMT -->
<!-- Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <link rel="stylesheet" href="../../maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="../../ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="../../maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="Resources/landing_styles4c56.css?121">
    <link rel="stylesheet" type="text/css" href="Resources/game_stylese0c6.css?421">
    <link rel="stylesheet" type="text/css" href="../../cdn.jsdelivr.net/jquery.slick/1.6.0/slick.css" />
    <link rel="stylesheet" type="text/css" href="../../cdn.jsdelivr.net/jquery.slick/1.6.0/slick-theme.css" />
    <script type="text/javascript" src="../../cdn.jsdelivr.net/jquery.slick/1.6.0/slick.min.js"></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0" />
</head>
<title>Sensodyne</title>
<body>
    <div id="landingPageDIV">
        <div id="wrapperDIV">
            <div id="firstQuarterDIV">
                <div id="gskLogoDIV">
                </div>
                <div id="leftSideMain">
                    <div id="sensodyneLogoDIV">
                    </div>
                    <div id="mainTextContainer">
                        <p class="headerBlueLabel">
                            Ne odpovejte se užitkom!
                        </p>
                        <p class="mainTextParagraph">
                            Ste vedeli, da se vsak tretji sooča z občutljivostjo zob?
                        </p>
                        <p class="mainTextParagraph">
                            Prepustite se užitkom in sodelujte v nagradni igri, z izdelki Sensodyne<sup>®</sup> pa olajšajte
                            občutljivost vaših zob že danes!
                        </p>
                        <p class="mainTextParagraph">
                            Čakajo vas tri možne nagrade - vsaj ena bo zagotovo vaša!
                        </p>
                        <button class="blue-btn participateBtn" onClick="showGameDIV()">
                            SODELUJTE &nbsp;<span class="fa fa-angle-right fa-2x" aria-hidden="true"></span>
                        </button>
                    </div>
                </div>
                <div id="rightSideMain">
                </div>
            </div>
            <div id="secondQuarterDIV">
                <div class="carousel-page">
                    <img id="prevArrow" src="Resources/arrow_prev.png" onClick="prevSlide()">
                    <img id="nextArrow" src="Resources/arrow_next.png" onClick="nextSlide()">
                    <img id="blue_separator" src="Resources/blue_separator.png">
                    <div class="margin100">
                        <p class="headerBlueLabelLargeRight">
                            Imate občutljive zobe?
                        </p>
                        <div class="description">
                            <p id="carouselTitle" class="carouselBlueLabel">
                                Kava
                            </p>
                            <p id="carouselDescription" class="carouselText">
                                Zaradi različnih dejavnikov lahko naši zobje postanejo občutljivi na toplotne spremembe,
                                sladko ali kislo hrano. Kar ena tretina ljudi trpi za preobčutljivostjo zob.
                        </div>
                    </div>
                    <div class="carouselImages">
                        <div class="carouselImg">
                            <img class="full carK" src="Resources/carousel_kava.png">
                        </div>
                        <div class="carouselImg blurred">
                            <img class="full carH" src="Resources/carousel_hladna.png">
                        </div>
                        <div class="carouselImg blurred">
                            <img class="full carS" src="Resources/carousel_sladoled.png">
                        </div>
                    </div>
                </div>
            </div>
            <div id="thirdQuarterDIV">
                <p class="headerBlueLabelLarge">
                    Kako Sensodyne pomaga?
                </p>
                <p class="toothpasteText">
                    Sensodyne<sup>®</sup> Advanced Clean nudi napredno čiščenje z dolgotrajnim občutkom svežine ter pri
                    vsakodnevni negi zagotavlja trajno zaščito pred bolečino zaradi občutljivosti zob. Napredna formulacija
                    nudi čiščenje s tehnologijo intenzivnejšega penjenja.
                </p>
                <div id="toothpasteDIV">
                </div>
                <p class="blagovnaznamkaText">
                    <span class="helveticaBold">BLAGOVNA ZNAMKA ŠT. 1</span>
                    <br />ZA OBČUTLJIVE ZOBE V SLOVENIJI*
                </p>
                <button class="blue-btn-particles lower30 moreBtn" onclick="linkToSensodyne()">
                    VEČ O DELOVANJU &nbsp;<span class="fa fa-angle-right fa-2x" aria-hidden="true"></span>
                </button>
            </div>
            <div id="fourthQuarterDIV">
                <div class="horizontal-seperator">
                </div>
                <div class="ellipse1"></div>
                <div class="ellipse2 phoneHidden"></div>
                <div class="col-sm-4">
                    <div class="fbEventDIV below">
                        <div class="centered">
                            <p class="FBEventName">
                                CITY PARK
                                <div class="line-separator"></div>
                            </p>
                            <p class="FBEventDesc">
                                <i class="fa fa-clock-o" aria-hidden="true"></i> 26. April 11:00 - 19:00
                                <br />
                                <i class="fa fa-map-marker" aria-hidden="true"></i> City Park Ljubljana
                            </p>
                            <button class="fb-btn">
                                VEČ INFO &nbsp;<span class="fa fa-angle-right fa-2x"
                                                     aria-hidden="true"></span>
                            </button>
                        </div>
                    </div>
                    <div class="fbEventDIV dividerFB">
                        <div class="centeredAlt">
                            <p class="FBEventName">
                                ROTOVŽ MARIBOR
                                <div class="line-separator"></div>
                            </p>
                            <p class="FBEventDesc">
                                <i class="fa fa-clock-o" aria-hidden="true"></i> 5. Maj 11:00 - 19:00
                                <br />
                                <i class="fa fa-map-marker" aria-hidden="true"></i> Rotovž Maribor
                            </p>
                            <button class="fb-btn">
                                VEČ INFO &nbsp;<span class="fa fa-angle-right fa-2x"
                                                     aria-hidden="true"></span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4 phoneHidden">
                    <div class="fbEventDIV below">
                        <div class="vertical-separator"></div>
                        <div class="centered">
                            <p class="FBEventName">
                                KUHNA NA PLAC
                                <div class="line-separator"></div>
                            </p>
                            <p class="FBEventDesc">
                                <i class="fa fa-clock-o" aria-hidden="true"></i> 6. Maj 10:00 - 16:00
                                <br />
                                <i class="fa fa-map-marker" aria-hidden="true"></i> Kuhna na plac
                            </p>
                            <button class="fb-btn">
                                VEČ INFO &nbsp;<span class="fa fa-angle-right fa-2x"
                                                     aria-hidden="true"></span>
                            </button>
                        </div>
                    </div>
                    <div class="fbEventDIV dividerFB">
                        <div class="centered">
                            <p class="FBEventName">
                                MERCATOR ŠIŠKA
                                <div class="line-separator"></div>
                            </p>
                            <p class="FBEventDesc">
                                <i class="fa fa-clock-o" aria-hidden="true"></i> 11. - 12. Maj 13:00 - 21:00
                                <br />
                                <i class="fa fa-map-marker" aria-hidden="true"></i> Mercator Šiška
                            </p>
                            <button class="fb-btn">
                                VEČ INFO &nbsp;<span class="fa fa-angle-right fa-2x"
                                                     aria-hidden="true"></span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4 phoneHidden">
                    <div class="fbEventDIV below">
                        <div class="vertical-separator"></div>
                        <div class="centered">
                            <p class="FBEventName">
                                MARATON TREH SRC
                                <div class="line-separator"></div>
                            </p>
                            <p class="FBEventDesc">
                                <i class="fa fa-clock-o" aria-hidden="true"></i> 20. Maj 8:00 - 16:00
                                <br />
                                <i class="fa fa-map-marker" aria-hidden="true"></i> Maraton treh src
                            </p>
                            <button class="fb-btn">
                                VEČ INFO &nbsp;<span class="fa fa-angle-right fa-2x"
                                                     aria-hidden="true"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="slotGameDIV" hidden>
        <div id="startPageDIV">
            <div id="pageHeader">
                <div id="logoDIV">
                </div>
                <div id="logo1DIV" class="hidden">
                </div>
                <div id="congratulationMessage" class="hidden">ČESTITKE</div>
                <div id="moreLuckNextTimeMessage" class="hidden">VEČ SREČE PRIHODNJIČ!</div>
                <div id="messageAboutAward" class="hidden">Za nagrado prejmete vzorec zobne paste Sensodyne!</div>
                <div id="mainAwardMessage" class="hidden">Še vedno pa lahko sodelujete v žrebu za glavno nagrado!</div>
                <div id="participationFillFieldsMessage" class="hidden">
                    Za sodelovanje v žrebu za glavno nagrado izpolnite
                    spodnji obrazec:
                </div>
                <div id="thanksMessage" class="hidden">HVALA ZA SODELOVANJE!</div>
            </div>
            <div id="mainContentDIV">
                <div id="wheelContainer">
                    <div id="crticeDIV">
                    </div>
                    <input type="image" src="Resources/rotate_btn.png" id="rotateBtn">
                    <div id="rotateMessage">ZAVRTI</div>
                </div>
                <div id="slotMachineContainer">
                    <div id="reels">
                        <div id="upperElementsTransition"></div>
                        <canvas id="canvas1" width="130" height="300"></canvas>
                        <canvas id="canvas2" width="130" height="300"></canvas>
                        <canvas id="canvas3" width="130" height="300"></canvas>
                        <div id="bottomElementsTransition"></div>
                    </div>
                    <div id="clickWheelMessage">Pritisnite na gumb in se prepustite užitkom!</div>
                </div>
                <div id="positionArrow">
                </div>
                <div id="meterContainer">
                </div>
            </div>
            <div id="bottomStyleBackground">
                <div id="circleDIV">
                </div>
                <div id="lineDIV">
                </div>
                <div id="chartDIV">
                </div>
            </div>
            <div id="nextButtonSubmitDataContainer" class="hidden">
                <div id="sensodynePastaContainer" class="hidden">
                    <div id="sensodynePasta">
                    </div>
                </div>
                <div id="bottomDataContainer">
                    <div id="message">
                    </div>
                    <div id="nextButton" class="blue-btn-game">
                        NAPREJ
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </div>
                </div>
                <div id="userDataContainer" class="hidden">
                    <div id="citiesContainer">
                        <div id="cityToTravelMessage">Kam bi odpotovali, če zadanete glavno nagrado?</div>
                        <div id="Barcelona">
                            <div id="BarcelonaDescription" onClick="setDestination(0)">Sončna Barcelona</div>
                            <div id="BarcelonaImage" onClick="setDestination(0)"></div>
                        </div>
                        <div id="Pariz">
                            <div id="ParizDescription" onClick="setDestination(1)">Romantičen Pariz</div>
                            <div id="ParizImage" onClick="setDestination(1)"></div>
                        </div>
                        <div id="Berlin">
                            <div id="BerlinDescription" onClick="setDestination(2)">Odbiti Berlin</div>
                            <div id="BerlinImage" onClick="setDestination(2)"></div>
                        </div>
                    </div>
                    <div id="userDataForm" class="hidden">
                        <form id="participantForm">
                            <input id="hiddenDestinationInput" type="hidden" name="participant_destination">
                            <div>
                                <div class="userInputStyleWithAttribute">Ime in priimek</div>
                                <input type="text" id="NameAndSurname" name="participant_name" class="userInput"
                                       placeholder="Ime in priimek">
                            </div>
                            <div>
                                <div class="userInputStyleWithAttribute">Email</div>
                                <input type="text" id="Email" name="participant_email" class="userInput"
                                       placeholder="Email">
                            </div>
                            <div>
                                <div class="userInputStyleWithAttribute">Naslov</div>
                                <input type="text" id="Address" name="participant_address" class="userInput"
                                       placeholder="Naslov">
                            </div>
                            <div>
                                <div class="userInputStyleWithAttribute">Kraj</div>
                                <input type="text" id="City" name="participant_city" class="userInput" placeholder="Kraj">
                            </div>
                            <div>
                                <div class="userInputStyleWithAttribute">Poštna številka</div>
                                <input type="text" id="PostCode" name="participant_post" class="userInput"
                                       placeholder="Poštna številka">
                            </div>
                            <div class="hidden">
                                <div class="userInputStyleWithAttribute">Uporabnik dobi nagrado</div>
                                <input type="text" id="userGetAward" name="participant_won" class="userInput">
                            </div>
                            <div class="bottomDivUserFormData">
                                <div id="agreeWithRulesContainer">
                                    <input type="checkbox" id="agreeWithRules">
                                    <span style="white-space: pre;">Strinjam se s </span>
                                    <span>
                                        <a href="#" class="navRulesParticipation">
                                            Pravili sodelovanja.
                                        </a>
                                    </span>
                                </div>
                                <div id="sendButton" class="blue-btn-game">
                                    ODDAJ PODATKE
                                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div id="invitationPageContainer" class="hidden">
                    <div id="discountMessageContainer">
                        S klikom na spodnji gumb prenesite kupon za 33% popust
                        na zobno pasto Sensodyne<sup>®</sup> Advanced Clean.
                    </div>
                    <div id="downloadDiscount" class="blue-btn-game-long">
                        <span style="width: 70%;">PRENESITE KUPON ZA 33% POPUST</span>
                        <i class="fa fa-angle-right fa-2x" aria-hidden="true"></i>
                    </div>
                    <div id="bountyProvideMessage">Kot smo obljubili - vsaj ena nagrada je zagotovljena! :)</div>
                    <div id="mobileLineSeparator" class="hidden">
                        <div class="dotStart"></div>
                        <div class="verticalLineSeparatorContent"></div>
                        <div class="dotEnd"></div>
                    </div>
                    <div id="joinMessage">
                        Pridružite se nam tudi v
                        <span class="sensodyneLaboratoryMessage">
                            Sensodyne<sup>®</sup> Izkustevnih laboratorijih <div class="normalFontWeight">na lokacijah:</div>
                        </span>
                    </div>
                    <div id="locationsContainer">
                        <div class="locationContainer">
                            <div class="horizontalLineLocation"></div>
                            <div class="locationData">
                                <div><i class="fa fa-clock-o icon" aria-hidden="true"></i></div>
                                <div>26. April</div>
                                <div>11:00 - 19:00</div>
                                <div><i class="fa fa-map-marker icon" aria-hidden="true"></i></div>
                                <div>City Park Ljubljana</div>
                            </div>
                        </div>
                        <div class="verticalLineSeparatorContainer">
                            <div class="verticalLine"></div>
                            <div class="verticalLineCircle"></div>
                        </div>
                        <div class="locationContainer">
                            <div class="horizontalLineLocation"></div>
                            <div class="locationData">
                                <i class="fa fa-clock-o icon" aria-hidden="true"></i>
                                <div>5. Maj</div>
                                <div>11:00 - 19:00</div>
                                <i class="fa fa-map-marker icon" aria-hidden="true"></i>
                                <div>Rotovž Maribor</div>
                            </div>
                        </div>
                        <div class="verticalLineSeparatorContainer">
                            <div class="verticalLine"></div>
                            <div class="verticalLineCircle"></div>
                        </div>
                        <div class="locationContainer">
                            <div class="horizontalLineLocation"></div>
                            <div class="locationData">
                                <i class="fa fa-clock-o icon" aria-hidden="true"></i>
                                <div>6. Maj</div>
                                <div>10:00 - 16:00</div>
                                <div><i class="fa fa-map-marker icon" aria-hidden="true"></i></div>
                                <div>Kuhna na plac</div>
                            </div>
                        </div>
                        <div class="verticalLineSeparatorContainer">
                            <div class="verticalLine"></div>
                            <div class="verticalLineCircle"></div>
                        </div>
                        <div class="locationContainer">
                            <div class="horizontalLineLocation"></div>
                            <div class="locationData">
                                <i class="fa fa-clock-o icon" aria-hidden="true"></i>
                                <div>11. do 12. Maj</div>
                                <div>13:00 - 21:00</div>
                                <div><i class="fa fa-map-marker icon" aria-hidden="true"></i></div>
                                <div>Mercator Šiška</div>
                            </div>
                        </div>
                        <div class="verticalLineSeparatorContainer">
                            <div class="verticalLine"></div>
                            <div class="verticalLineCircle"></div>
                        </div>
                        <div class="locationContainer">
                            <div class="horizontalLineLocation"></div>
                            <div class="locationData">
                                <div><i class="fa fa-clock-o icon" aria-hidden="true"></i></div>
                                <div>20. Maj</div>
                                <div>8:00 - 16:00</div>
                                <div><i class="fa fa-map-marker icon" aria-hidden="true"></i></div>
                                <div>Maraton treh src</div>
                            </div>
                        </div>
                    </div>
                    <div id="returnToStartButton" class="blue-btn-game-long">NAZAJ NA ZAČETNO STRAN</div>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    $(function () {

        if (window.innerWidth > 767) {
            $('.carouselImages').slick({
                slidesToShow: 1,
                centerMode: true,
                centerPadding: '25%',
                speed: 750,
                arrows: false,
                dots: false,
                infinite: true
            });
        }
        else {
            $('.carouselImages').slick({
                slidesToShow: 1,

                speed: 750,
                arrows: false,
                dots: false,
                infinite: true
            });
        }

        $(".carouselImages").on('beforeChange', function (event, slick, currentSlide, nextSlide) {
            $("#carouselTitle").fadeOut();
            $("#carouselDescription").fadeOut();
        });
        $(".carouselImages").on('afterChange', function (event, slick, currentSlide) {
            blurImage(currentSlide);
            $("#carouselTitle").fadeIn(changeText(currentSlide));
            $("#carouselDescription").fadeIn();
        });
    });

    function changeText(nextSlide) {
        if (nextSlide == 0) {
            $("#carouselTitle").html("Kava");
            $("#carouselDescription").html("Zaradi različnih dejavnikov lahko naši zobje postanejo občutljivi na toplotne spremembe, sladko ali kislo hrano. Kar ena tretina ljudi trpi za preobčutljivostjo zob.");
        }
        else if (nextSlide == 1) {
            $("#carouselTitle").html("Hladna pijača");
            $("#carouselDescription").html("Ker je v zobovini tisoče majhnih kanalčkov, ki vodijo do živčevja, zobje zaradi vdora tekočine in posledično draženja zivčnih končičev postanejo preobčutljivi.");
        }
        else {
            $("#carouselTitle").html("Sladoled");
            $("#carouselDescription").html("Zobovina je pri zdravih zobeh prekrita z dlesnijo in sklenino. Če pa je zobovina izpostavljena, postane to področje občutljivo.");
        }
    }

    function blurImage(nextSlide) {
        $(".blurred").removeClass("blurred");
        if (nextSlide == 0) {
            $(".carH").addClass("blurred");
            $(".carS").addClass("blurred");

        }
        else if (nextSlide == 1) {
            $(".carK").addClass("blurred");
            $(".carS").addClass("blurred");
        }
        else {
            $(".carK").addClass("blurred");
            $(".carH").addClass("blurred");
        }
    }

    function prevSlide() {
        $(".carouselImages").slick("slickPrev");
    }

    function nextSlide() {
        $(".carouselImages").slick("slickNext");
    }

    function linkToSensodyne() {
        window.open(
            'http://www.sensodyne.si/',
            '_blank' // <- This is what makes it open in a new window.
        );
    }

    function showGameDIV() {
        $("#landingPageDIV").hide();
        $("#slotGameDIV").show();
    }

</script>
<script type="text/javascript">
    var sendButtonPressed = false; //check if send button pressed
    var _mobile = false; // check if mobile screen size
    var IMAGE_HEIGHT = 130;
    var IMAGE_TOP_MARGIN = 0.01;
    var IMAGE_BOTTOM_MARGIN = 0.01;
    var SLOT_SEPARATOR_HEIGHT = 0.01;
    var SLOT_HEIGHT = IMAGE_HEIGHT + IMAGE_TOP_MARGIN + IMAGE_BOTTOM_MARGIN + SLOT_SEPARATOR_HEIGHT; // how many pixels one slot image takes
    var RUNTIME = 2000; // how long all slots spin before starting countdown
    var SPINTIME = 1000; // how long each slot spins at minimum
    var ITEM_COUNT = 8; // item count in slots
    var SLOT_SPEED = 20; // how many pixels per second slots roll
    var DRAW_OFFSET = 45 // how much draw offset in slot display from top

    $(function () {

        changeLayoutWindow();

        $(window).on("resize", function () {
            changeLayoutWindow();
        });

        $("#returnToStartButton").on("click", function () {
            $("#nextButtonSubmitDataContainer, #thanksMessage, #logo1DIV").addClass("hidden");
            $("#slotMachineContainer, #logoDIV, #rotateBtn, #rotateMessage, #clickWheelMessage").removeClass("hidden");
            document.getElementById("rotateBtn").disabled = false;
            if (_mobile) {
                $("#logoDIV, #invitationPageContainer").addClass("hidden");
                $("#logo1DIV").removeClass("hidden");
                $("#wheelContainer").removeClass("containerCollapse");
                $("#slotMachineContainer").removeClass("moveDownSlotMachineContainer");
                document.getElementById("bottomStyleBackground").style.height = null;
                $(window).scrollTop(0);
                location.reload();
            }
        });

        $("#nextButton").on("click", function () {
            $("#logoDIV, #moreLuckNextTimeMessage, #message, #nextButton, #slotMachineContainer, #positionArrow, #mainAwardMessage, #bottomDataContainer, #congratulationMessage, #sensodynePasta, #messageAboutAward").addClass("hidden");
            $("#nextButtonSubmitDataContainer").addClass("showDataPanel");
            $("#logo1DIV, #nextButtonSubmitDataContainer, #participationFillFieldsMessage, #userDataContainer").removeClass("hidden");
            $("#bottomStyleBackground").addClass("expandAreaInputFormCities");
            $("#nextButtonSubmitDataContainer").addClass("moveDownNextButtonSubmitDataContainer");
            $("#bottomStyleBackground").removeClass("bottomStyleBackgroundExpand").addClass("expandAreaInputFormCities");
            $("#lineDIV").removeClass("lineDIVStartPageMobile");
            $("#rotateBtn").addClass("hidden");
            if (_mobile) {
                $(window).scrollTop(0);
            }
        });
        $("#sendButton").on("click", function () {
            var email_regex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i;

            var nameAndSurname = document.getElementById("NameAndSurname");
            var email = document.getElementById("Email").value;
            var address = document.getElementById("Address").value;
            var city = document.getElementById("City").value;
            var postCode = document.getElementById("PostCode").value;
            var checkboxChecked = document.getElementById("agreeWithRules").checked;

            if (nameAndSurname == "" || email == "" || address == "" || city == "" || postCode == "" || !checkboxChecked || !email_regex.test(email)) {
                alert("Preverite oz. popravite vsa vnosna polja!");
            }
            else {
                $.ajax({
                    type: "POST",
                    url: "/Web/index.php/" + "participants/insert",
                    data: $("#participantForm").serialize(),
                    success: function (response) {
                        // OK
                        if (response == "") {
                            $("#userDataContainer, #participationFillFieldsMessage, #rotateBtn, #rotateMessage, #mainAwardMessage, #moreLuckNextTimeMessage").addClass("hidden");
                            $("#thanksMessage, #invitationPageContainer").removeClass("hidden");
                            $("#bottomStyleBackground").removeClass("bottomStyleBackgroundWinner"); //WINNER LAST TAB NOT SCROLLING FIX
                            sendButtonPressed = true;
                            resizeLastPageContent();
                            $(window).scrollTop(0);
                        }
                        else {
                            alert(response);
                        }
                    }
                });
                $("#userDataContainer, #participationFillFieldsMessage, #rotateBtn, #rotateMessage, #mainAwardMessage, #moreLuckNextTimeMessage").addClass("hidden");
                $("#thanksMessage, #invitationPageContainer").removeClass("hidden");
                sendButtonPressed = true;
                resizeLastPageContent();
            }
        });
        SlotGame();
    });

    function resizeLastPageContent() {
        $("#bottomStyleBackground").removeClass("expandAreaInputFormDestinationSelected");
        // invitationPageContainer height data
        var height = window.getComputedStyle(document.getElementById("invitationPageContainer", null)).height;
        document.getElementById("bottomStyleBackground").style.height = parseInt(height.substring(0, height.length - 2)) + 100 + "px";
    }

    function setDestination(which) {
        var destination;
        $(".imgSelected").removeClass("imgSelected");
        $(".opacity7").removeClass("opacity7");
        if (which == 1) {
            destination = "Pariz";
            $("#ParizImage").addClass("imgSelected");
            $("#BarcelonaImage").addClass("opacity7");
            $("#BerlinImage").addClass("opacity7");
        }
        else if (which == 2) {
            destination = "Berlin";
            $("#BerlinImage").addClass("imgSelected");
            $("#BarcelonaImage").addClass("opacity7");
            $("#ParizImage").addClass("opacity7");
        }
        else {
            destination = "Barcelona";
            $("#BarcelonaImage").addClass("imgSelected");
            $("#ParizImage").addClass("opacity7");
            $("#BerlinImage").addClass("opacity7");
        }

        $("#hiddenDestinationInput").val(destination);
        $("#userDataForm").removeClass("hidden");

        if (_mobile) {
            $("#bottomStyleBackground").removeClass("expandAreaInputFormCities").addClass("expandAreaInputFormDestinationSelected");
            $("html, body").animate({ scrollTop: $("#userDataForm").offset().top }, 500);
        }
    }

    function changeLayoutWindow() {
        if ($(window).width() <= 767) {
            _mobile = true;
            $("#startPageDIV").addClass("startPageDIVMobile");
            $("#logo1DIV").removeClass("hidden");
            $("#logoDIV, #meterContainer, #chartDIV, #positionArrow").addClass("hidden");
            $("#lineDIV").addClass("lineDIVStartPageMobile");
            $("#mobileLineSeparator").removeClass("hidden");

            $.each($(".userInput"), function (index, element) {
                $(element).addClass("userDataFormInputMobile");
            });

            $.each($("#slotMachineContainer #reels canvas"), function (index, element) {
                $(element).addClass("slotMachineMobile");
            });

            // hide input attribute
            $.each($(".userInputStyleWithAttribute"), function (index, element) {
                $(element).addClass("hidden");
            });

            if (sendButtonPressed) {
                resizeLastPageContent();
            }

        }
        else {
            $.each($(".userInputStyleWithAttribute"), function (index, element) {
                $(element).removeClass("hidden");
            });

        }
    }

    function shuffleArray(array) {
        for (i = array.length - 1; i > 0; i--) {
            var j = parseInt(Math.random() * i)
            var tmp = array[i];
            array[i] = array[j]
            array[j] = tmp;
        }
    }

    // Images must be preloaded before they are used to draw into canvas
    function preloadImages(images, callback) {

        function _preload(asset) {
            asset.img = new Image();
            asset.img.src = "./Resources/" + asset.id + '.png';

            asset.img.addEventListener("load", function () {
                _check();
            }, false);

            asset.img.addEventListener("error", function (err) {
                _check(err, asset.id);
            }, false);
        }

        var loadc = 0;

        function _check(err, id) {
            if (err) {
                alert('Failed to load ' + id);
            }
            loadc++;
            if (images.length == loadc)
                return callback()
        }

        images.forEach(function (asset) {
            _preload(asset);
        });
    }

    function copyArray(array) {
        var copy = [];
        for (var i = 0; i < array.length; i++) {
            copy.push(array[i]);
        }
        return copy;
    }


    function SlotGame() {

        var game = new Game();

        var items = [
            { id: 'water' },
            { id: 'kava' },
            { id: 'sladoled' },
            { id: 'water' },
            { id: 'kava' },
            { id: 'sladoled' },
            { id: 'water' },
            { id: 'pasta_sensodyne' }
        ];

        $('canvas').attr('height', IMAGE_HEIGHT * ITEM_COUNT * 2);
        $('canvas').css('height', IMAGE_HEIGHT * ITEM_COUNT * 2);

        game.items = items;

        // load assets and predraw the reel canvases
        preloadImages(items, function () {

            // images are preloaded

            // draws canvas strip
            function _fill_canvas(canvas, items) {
                ctx = canvas.getContext('2d');
                ctx.fillStyle = '#ddd';

                for (var i = 0; i < ITEM_COUNT; i++) {
                    var asset = items[i];
                    ctx.save();

                    ctx.drawImage(asset.img, 0, i * SLOT_HEIGHT + IMAGE_TOP_MARGIN);
                    ctx.drawImage(asset.img, 0, (i + ITEM_COUNT) * SLOT_HEIGHT + IMAGE_TOP_MARGIN);
                    ctx.restore();
                    //ctx.fillRect(0, i * SLOT_HEIGHT, 70, SLOT_SEPARATOR_HEIGHT);
                    //ctx.fillRect(0, (i + ITEM_COUNT)  * SLOT_HEIGHT, 70, SLOT_SEPARATOR_HEIGHT);
                }
            }

            // Draw the canvases with shuffled arrays
            game.items1 = copyArray(items);
            shuffleArray(game.items1);
            _fill_canvas(game.c1[0], game.items1);
            game.items2 = copyArray(items);
            shuffleArray(game.items2);
            _fill_canvas(game.c2[0], game.items2);
            game.items3 = copyArray(items);
            shuffleArray(game.items3);
            _fill_canvas(game.c3[0], game.items3);
            game.resetOffset = (ITEM_COUNT + 3) * SLOT_HEIGHT;
            game.loop();
        });

        $('#rotateBtn').click(function (e) {
            $(this).addClass("spinning");
            document.getElementById("rotateBtn").disabled = true;
            // start game on play button click
            game.restart();
        });

        // Show reels for debugging
        var toggleReels = 1;
        $('#debug').click(function () {
            toggleReels = 1 - toggleReels;
            if (toggleReels) {
                $('#reels').css('overflow', 'hidden');
            } else {
                $('#reels').css('overflow', 'visible');
            }
        });
    }

    function Game() {

        // reel canvases
        this.c1 = $('#canvas1');
        this.c2 = $('#canvas2');
        this.c3 = $('#canvas3');

        // set random canvas offsets
        var offset = -parseInt(Math.random() * ITEM_COUNT) * SLOT_HEIGHT;
        while (offset > -100) {
            offset = -parseInt(Math.random() * ITEM_COUNT) * SLOT_HEIGHT;
        }

        this.offset1 = offset;
        this.offset2 = offset;
        this.offset3 = offset;
        this.speed1 = this.speed2 = this.speed3 = 0;
        this.lastUpdate = new Date();

        // Needed for CSS translates
        this.vendor =
            (/webkit/i).test(navigator.appVersion) ? '-webkit' :
                (/firefox/i).test(navigator.userAgent) ? '-moz' :
                    (/msie/i).test(navigator.userAgent) ? 'ms' :
                        'opera' in window ? '-o' : '';

        this.cssTransform = this.vendor + '-transform';
        this.has3d = ('WebKitCSSMatrix' in window && 'm11' in new WebKitCSSMatrix())
        this.trnOpen = 'translate' + (this.has3d ? '3d(' : '(');
        this.trnClose = this.has3d ? ',0)' : ')';
        this.scaleOpen = 'scale' + (this.has3d ? '3d(' : '(');
        this.scaleClose = this.has3d ? ',0)' : ')';

        // draw the slots to initial locations
        this.draw(true);
    }

    // Restar the game and determine the stopping locations for reels
    Game.prototype.restart = function () {
        this.lastUpdate = new Date();
        this.speed1 = this.speed2 = this.speed3 = SLOT_SPEED

        // function locates id from items
        function _find(items, id) {
            for (var i = 0; i < items.length; i++) {
                if (items[i].id == id) return i;
            }
        }

        var chanceToWin = Math.floor((Math.random() * 3) + 1);
        ;
        this.result1 = parseInt(Math.random() * this.items1.length);
        if (chanceToWin != 3) {
            // get random results
            this.result2 = parseInt(Math.random() * this.items2.length);
            this.result3 = parseInt(Math.random() * this.items3.length);
        }
        else {

            for (var i = 0; i < this.items2.length; i++) {
                if (this.items2[i].id == this.items1[this.result1].id) {

                    this.result2 = i;
                    break;
                }
            }
            for (var i = 0; i < this.items3.length; i++) {
                if (this.items3[i].id == this.items1[this.result1].id) {

                    this.result3 = i;
                    break;
                }
            }

        }


        // Clear stop locations
        this.stopped1 = false;
        this.stopped2 = false;
        this.stopped3 = false;

        // randomize reel locations
        this.offset1 = -parseInt(Math.random(ITEM_COUNT)) * SLOT_HEIGHT;
        this.offset2 = -parseInt(Math.random(ITEM_COUNT)) * SLOT_HEIGHT;
        this.offset3 = -parseInt(Math.random(ITEM_COUNT)) * SLOT_HEIGHT;

        this.state = 1;
    }

    window.requestAnimFrame = (function () {
        return window.requestAnimationFrame ||
            window.webkitRequestAnimationFrame ||
            window.mozRequestAnimationFrame ||
            window.oRequestAnimationFrame ||
            window.msRequestAnimationFrame ||
            function (/* function */ callback, /* DOMElement */ element) {
                window.setTimeout(callback, 1000 / 60);
            };
    })();

    Game.prototype.loop = function () {
        var that = this;
        that.running = true;
        (function gameLoop() {
            that.update();
            that.draw();
            if (that.running) {
                requestAnimFrame(gameLoop);
            }
        })();
    }

    Game.prototype.update = function () {

        var now = new Date();
        var that = this;

        // Check slot status and if spun long enough stop it on result
        function _check_slot(offset, result) {
            if (now - that.lastUpdate > SPINTIME) {
                var c = parseInt(Math.abs(offset / SLOT_HEIGHT)) % ITEM_COUNT;
                if (c == result) {
                    if (result == 0) {
                        if (Math.abs(offset + (ITEM_COUNT * SLOT_HEIGHT)) < (SLOT_SPEED * 1.5)) {
                            return true; // done
                        }
                    } else if (Math.abs(offset + (result * SLOT_HEIGHT)) < (SLOT_SPEED * 1.5)) {
                        return true; // done
                    }
                }
            }
            return false;
        }

        switch (this.state) {
            case 1: // all slots spinning
                if (now - this.lastUpdate > RUNTIME) {
                    this.state = 2;
                    this.lastUpdate = now;
                }
                break;
            case 2: // slot 1
                this.stopped1 = _check_slot(this.offset1, this.result1);
                if (this.stopped1) {
                    this.speed1 = 0;
                    this.state++;
                    this.lastUpdate = now;
                }
                break;
            case 3: // slot 1 stopped, slot 2
                this.stopped2 = _check_slot(this.offset2, this.result2);
                if (this.stopped2) {
                    this.speed2 = 0;
                    this.state++;
                    this.lastUpdate = now;
                }
                break;
            case 4: // slot 2 stopped, slot 3
                this.stopped3 = _check_slot(this.offset3, this.result3);
                if (this.stopped3) {
                    $("#rotateBtn").removeClass("spinning");
                    this.speed3 = 0;
                    this.state++;
                }
                break;
            case 5: // slots stopped
                if (now - this.lastUpdate > 3000) {
                    this.state = 6;
                }
                break;
            case 6: // check results
                var ec = 0;

                $("#logoDIV, #clickWheelMessage").addClass("hidden");
                $("#logo1DIV").removeClass("hidden");


                if (_mobile) {
                    $("#rotateBtn, #rotateMessage").addClass("hidden");
                    $("#wheelContainer").addClass("containerCollapse");

                }

                if (that.items1[that.result1].id == that.items2[that.result2].id && (that.items1[that.result1].id == that.items3[that.result3].id)) {
                    document.getElementById("message").innerHTML = "V nadaljevanju oddajte svoje podatke za dostavo nagrade in sodelujte v žrebanju za glavno nagrado - užitkasko potovanje v mesto po vaši izbiri!"
                    $("#nextButtonSubmitDataContainer, #congratulationMessage, #messageAboutAward, #sensodynePastaContainer").removeClass("hidden");
                    $("#slotMachineContainer").addClass("moveDownSlotMachineContainerWinner");
                    $("#bottomStyleBackground").addClass("bottomStyleBackgroundWinner");
                    document.getElementById("userGetAward").value = "true";
                }
                else {
                    document.getElementById("message").innerHTML = "V nadaljevanju oddajte svoje podatke in sodelujte v žrebanju za glavno nagrado - užitkasko potovanje v mesto po vaši izbiri!"
                    $("#nextButtonSubmitDataContainer, #moreLuckNextTimeMessage, #mainAwardMessage").removeClass("hidden");
                    $("#slotMachineContainer").addClass("moveDownSlotMachineContainer");
                    $("#bottomStyleBackground").addClass("bottomStyleBackgroundExpand");
                    document.getElementById("userGetAward").value = "false";
                }
                this.state = 7;
                break;
            case 7: // game ends
                break;
            default:
        }
        this.lastupdate = now;
    }

    Game.prototype.draw = function (force) {

        if (this.state >= 6) return;

        // draw the spinning slots based on current state
        for (var i = 1; i <= 3; i++) {
            var resultp = 'result' + i;
            var stopped = 'stopped' + i;
            var speedp = 'speed' + i;
            var offsetp = 'offset' + i;
            var cp = 'c' + i;
            if (this[stopped] || this[speedp] || force) {
                if (this[stopped]) {
                    this[speedp] = 0;
                    var c = this[resultp]; // get stop location
                    this[offsetp] = -(c * SLOT_HEIGHT);

                    if (this[offsetp] + DRAW_OFFSET > 0) {
                        // reset back to beginning
                        this[offsetp] = -this.resetOffset + SLOT_HEIGHT * 3;
                    }

                } else {
                    this[offsetp] += this[speedp];
                    if (this[offsetp] + DRAW_OFFSET > 0) {
                        // reset back to beginning
                        this[offsetp] = -this.resetOffset + SLOT_HEIGHT * 3 - DRAW_OFFSET;
                    }
                }
                // translate canvas location
                this[cp].css(this.cssTransform, this.trnOpen + '0px, ' + (this[offsetp] + DRAW_OFFSET) + 'px' + this.trnClose);
            }
        }
    }
</script>
<!-- Mirrored from coffee.bitnet.si/Web/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 18 Apr 2017 19:49:47 GMT -->
</html>